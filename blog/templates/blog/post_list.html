{% extends 'layout.html' %}
{% block content %}
<div class="container">
<button class="btn btn-default" id="test" value="44">test</button>
<p>
    <span id="content"></span>
</p>
    <table class="table">
        <thead>
            <tr>
                <th scope="col">번호</th>
                <th scope="col">제목</th>
                <th scope="col">날짜</th>
            </tr>
        </thead>
        <tbody>
        {% for post in qs %}
            <tr>
                <td>{{ post.id}}</td>
                <td><button value="{{ post.id }}" style="text-decoration: none" class="btn btn-sm btn-block btn-primary btn-light" > {{ post.title}}</button></td>
                <td>{{post.short_date}}</td>
            </tr>
        {% endfor %}
            <tr>
                <td colspan="3">
                    <div class="d-flex flex-row-reverse">
                    <button class="btn btn-sm btn-primary" onclick="window.location.href='{% url 'blog:post_new' %}'">글쓰기</button>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
{%endblock%}
{% block javascript %}
    <script>
        $('td :button').click(function(){
            console.log($(this).val())
            $.ajax({
                url:'./api/'+ $(this).val(),
                success:function(data){
                    console.log(data)
                    $('#content').append(data.content)
                }
            })
        })
    </script>
{% endblock %}
